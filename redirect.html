<!--<html lang="ja">
<head>
    <script type="text/javascript">
        // Get the hash part of the URL after the # symbol
        var hash = window.location.hash.substring(1);
        var params = {};

        // Parse the hash parameters and store them in the params object
        hash.split('&').map(hk => { 
            let temp = hk.split('='); 
            params[temp[0]] = temp[1];
        });

        // Check if access token and expires_in are present
        if (params.access_token && params.expires_in) {
            // Set the expiration time of the token
            let timeObject = new Date();
            const milliseconds = params.expires_in * 1000; // expires_in is in seconds
            timeObject = new Date(timeObject.getTime() + milliseconds);

            // Store the access token and expiration time in local storage
            localStorage.setItem("accessToken", params.access_token);
            localStorage.setItem("expiredAt", timeObject);

            // Redirect the user back to the main page (you can change this)
            location.assign(window.location.origin);
        } else {
            // If token isn't found, handle the error
            console.error("Access token or expires_in not found in the URL hash.");
            // Optionally, redirect to an error page
            // location.assign('/error-page');
        }
    </script>
</head>
<body></body>
</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OAuth Redirect</title>
</head>
<body>
    <script>
        window.onload = function() {
            // Zoho returns the access token in the URL hash (#)
            const params = new URLSearchParams(window.location.hash.substring(1));  // Extract from URL hash part
            const accessToken = params.get("access_token");

            if (accessToken) {
                console.log('Authorization successful:', accessToken);
                localStorage.setItem("accessToken", accessToken);

                // Set expiration time (10 minutes from now)
                const expirationTime = new Date();
                expirationTime.setMinutes(expirationTime.getMinutes() + 10);
                localStorage.setItem("expiredAt", expirationTime.toISOString());

                // Redirect back to the main app
                window.location.href = "https://miitel-mg-group.vercel.app";
            } else {
                console.error("Authorization failed. No access token found.");
            }
        };
    </script>
</body>
</html>